# Propel Vibes - Session Context

## Current Status

**Version**: MVP with Approval System
**State**: Functional marketplace with manual approval workflow
**Deploy Status**: Live at propelvibes.com

## What Works
- Homepage with launches list, filters, and search (shows approved only)
- Launches browse page with sidebar filters
- Developers browse page with sidebar filters
- Launch detail page
- Demo data seeded (6 launches, 6 developers, 3 proposals)
- Mobile responsive design
- **NEW**: Post a Launch form (5-step wizard with verification)
- **NEW**: Verification photo + code system (like Swappa)
- **NEW**: Admin dashboard for manual approvals
- **NEW**: User dashboard showing launch statuses
- **NEW**: Resubmit flow for rejected launches

## What's Missing / TODO
- [ ] User authentication (signup/login flow) - forms exist but not fully wired
- [ ] Developer profile creation
- [ ] Proposal submission
- [ ] Messaging system
- [ ] Payment integration
- [ ] Developer verification (LinkedIn required)
- [ ] Email notifications for approvals/rejections
- [ ] Run the database migration on Supabase
- [ ] Create Supabase storage bucket "launch-assets" for uploads

## Approval Workflow

1. User posts launch → uploads 3+ screenshots + verification photo with code
2. Launch status = "pending_review", approval_status = "pending"
3. Admin reviews at /admin → can Approve or Reject (with reason)
4. If approved → status = "open", visible on marketplace
5. If rejected → user sees reason on dashboard, can resubmit

---

## Session History

### January 3, 2026 (Session 2) - Approval System

**Major Accomplishment**: Built complete verification and manual approval system

**Changes Made**:

1. **Database Migration** (`supabase/migrations/20260104000001_add_launch_verification.sql`)
   - Added `verification_code`, `verification_photo_url` columns
   - Added `approval_status` (pending/approved/rejected)
   - Added `rejection_reason`, `reviewed_by`, `reviewed_at`
   - Added `is_admin` flag to profiles
   - Created `generate_verification_code()` function
   - RLS policies for admin access

2. **Post-Launch Form Redesign** (`src/app/post-launch/page.tsx`)
   - Changed from 4 to 5 steps
   - Step 4: Screenshots & Verification (NEW)
     - Displays verification code (e.g., "PV-7X3K")
     - Copy to clipboard button
     - Verification photo upload (app + handwritten code)
     - 3-6 screenshot uploads
   - Step 5: Review & Submit
   - Submits with `approval_status: 'pending'`

3. **Admin Dashboard** (`src/app/admin/`)
   - `layout.tsx` - Admin access check
   - `page.tsx` - Approval queue with:
     - Stats for pending/approved/rejected
     - Filter tabs
     - Expandable launch cards
     - View verification photo + screenshots
     - Approve/Reject buttons with reason textarea

4. **Marketplace Filtering** (`src/hooks/useLaunches.ts`)
   - `useLaunches` now filters for `approval_status: 'approved'`
   - `useFeaturedLaunches` also filters approved only

5. **User Dashboard Updates** (`src/app/dashboard/page.tsx`)
   - Shows approval status badges (Pending/Approved/Rejected)
   - Shows rejection reason if applicable
   - Only approved launches link to marketplace

6. **User Launches Page** (`src/app/dashboard/launches/page.tsx`)
   - Detailed view of all user's launches
   - Resubmit button for rejected launches
   - Status explanations and next steps

7. **Type Updates** (`src/types/database.ts`)
   - Added `is_admin` to Profile interface
   - Verification fields already existed in Launch

**Files Created**:
- `src/app/admin/layout.tsx`
- `src/app/admin/page.tsx`
- `src/app/dashboard/launches/page.tsx`
- `supabase/migrations/20260104000001_add_launch_verification.sql`

**Files Modified**:
- `src/app/post-launch/page.tsx` (major rewrite)
- `src/app/dashboard/page.tsx`
- `src/hooks/useLaunches.ts`
- `src/types/database.ts`

**Known Issues**:
- Database migration not yet applied to Supabase
- Storage bucket "launch-assets" needs to be created
- Admin role needs to be set manually in database

**Next Session**:
- Apply database migration
- Create storage bucket with proper RLS
- Test full approval workflow
- Implement email notifications

---

### January 3, 2026 (Session 1) - Brand Redesign

**Major Accomplishment**: Complete marketplace redesign from SaaS-style to eBay-style

**Changes Made**:

1. **New Color Palette** (`globals.css`)
   - Changed from green to teal (#0D9488)
   - Added coral accent (#F97316)
   - Added purple highlight (#8B5CF6)
   - Warm off-white background (#FAFAF9)

2. **Brand Identity**: "Where Dreamers Ship"
   - Top bar with value props: "Vibe Coders Welcome", "Verified Developers", "Ship Faster"
   - Friendly, approachable marketplace personality

3. **New Marketplace Components** (`src/components/marketplace/`)
   - `LaunchCard.tsx` - Horizontal eBay-style card
   - `DeveloperCard.tsx` - Horizontal card with availability ring
   - `FilterSidebar.tsx` - Collapsible filter sections
   - `SortDropdown.tsx` - Sort options dropdown

4. **Bug Fixes**
   - Fixed infinite re-render loop in data hooks
   - Used `useRef` for Supabase client stability

**Commits**:
- `8a05063` feat: Brand identity redesign - "Where Dreamers Ship"
- `46bac1f` refactor: Classic marketplace redesign - remove modern AI aesthetics
- Earlier commits for eBay-style marketplace design
